{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/health/rowing/submit":{"post":{"tags":["health"],"summary":"Submit Rowing Data","description":"Extract rowing data from an image and save it to the database.\n\nThis endpoint:\n1. Downloads an image from the provided URL\n2. Uses an LLM to extract structured workout data\n3. Saves the data to the database\n\nReturns:\n    A response containing the status, workout ID, and extracted data","operationId":"submit_rowing_data_health_rowing_submit_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RowingExtractRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/health/rowing/get/{period}":{"get":{"tags":["health"],"summary":"Get Rowing Workouts","description":"Get rowing workout data for a specific time period.\n\nRetrieves rowing workouts from the database for the specified period.\n\nArgs:\n    period: The period type (day, week, month, year)\n    span: Number of periods to return (1-52)\n    offset: Number of periods to offset from now\n    \nReturns:\n    A list of rowing workouts for the specified period","operationId":"get_rowing_workouts_health_rowing_get__period__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"period","in":"path","required":true,"schema":{"enum":["day","week","month","year"],"type":"string","title":"Period"}},{"name":"span","in":"query","required":false,"schema":{"type":"integer","maximum":52,"minimum":1,"description":"Number of periods to return","default":1,"title":"Span"},"description":"Number of periods to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of periods to offset from now","default":0,"title":"Offset"},"description":"Number of periods to offset from now"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RowingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health/availablemetrics":{"get":{"tags":["health"],"summary":"Get Available Metrics","operationId":"get_available_metrics_health_availablemetrics_get","responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}}},"security":[{"APIKeyHeader":[]}]}},"/health/summary/{period}":{"get":{"tags":["health"],"summary":"Get Health Summary","operationId":"get_health_summary_health_summary__period__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"period","in":"path","required":true,"schema":{"enum":["day","week","month","year"],"type":"string","title":"Period"}},{"name":"metrics","in":"query","required":false,"schema":{"type":"string","description":"Comma-separated metrics/groups or 'all'. Use '@' prefix for metric groups.","default":"all","title":"Metrics"},"description":"Comma-separated metrics/groups or 'all'. Use '@' prefix for metric groups."},{"name":"span","in":"query","required":false,"schema":{"type":"integer","maximum":52,"minimum":1,"description":"Number of periods to return","default":1,"title":"Span"},"description":"Number of periods to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of periods to offset from now","default":0,"title":"Offset"},"description":"Number of periods to offset from now"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health/profile":{"get":{"tags":["health"],"summary":"Get Health Profile","description":"Get health profile from configured file location","operationId":"get_health_profile_health_profile_get","responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}}},"security":[{"APIKeyHeader":[]}]}},"/health/current":{"get":{"tags":["health"],"summary":"Get Current Measurements","description":"DEPRECATED: This endpoint will be removed in a future version. \nUse '/health/summary/day' with span=1 instead.\n\nGet latest measurements for all health metrics","operationId":"get_current_measurements_health_current_get","deprecated":true,"security":[{"APIKeyHeader":[]}],"parameters":[{"name":"types","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"integer"}},{"type":"null"}],"description":"Filter by measurement types","title":"Types"},"description":"Filter by measurement types"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health/trends":{"get":{"tags":["health"],"summary":"Get Health Trends","description":"DEPRECATED: This endpoint will be removed in a future version.\nUse '/health/summary/{period}' with appropriate period and span parameters instead.\n\nGet trend data for specified period and metrics","operationId":"get_health_trends_health_trends_get","deprecated":true,"security":[{"APIKeyHeader":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","description":"Number of days to analyze","default":30,"title":"Days"},"description":"Number of days to analyze"},{"name":"types","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"integer"}},{"type":"null"}],"description":"Filter by measurement types","title":"Types"},"description":"Filter by measurement types"},{"name":"interval","in":"query","required":false,"schema":{"type":"string","description":"Grouping interval: day, week, month","default":"day","title":"Interval"},"description":"Grouping interval: day, week, month"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrendResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health/stats":{"get":{"tags":["health"],"summary":"Get Health Stats","description":"DEPRECATED: This endpoint will be removed in a future version.\nUse '/health/summary/{period}' with appropriate metrics parameters instead.\n\nGet statistical analysis of health metrics","operationId":"get_health_stats_health_stats_get","deprecated":true,"security":[{"APIKeyHeader":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Analysis period in days","default":30,"title":"Days"},"description":"Analysis period in days"},{"name":"types","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"integer"}},{"type":"null"}],"description":"Filter by measurement types","title":"Types"},"description":"Filter by measurement types"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/getTest":{"get":{"summary":"Get Test","operationId":"get_test_getTest_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"APIKeyHeader":[]}]}},"/setTest":{"post":{"summary":"Set Test","operationId":"set_test_setTest_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestData"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"measurements":{"items":{"$ref":"#/components/schemas/Measurement"},"type":"array","title":"Measurements"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","default":"2025-03-28T21:44:47.951839"},"timezone":{"type":"string","title":"Timezone","default":"UTC"}},"type":"object","required":["measurements"],"title":"HealthResponse"},"HealthSummaryResponse":{"properties":{"period_type":{"type":"string","title":"Period Type"},"summaries":{"items":{"$ref":"#/components/schemas/PeriodSummary"},"type":"array","title":"Summaries"},"generated_at":{"type":"string","format":"date-time","title":"Generated At","default":"2025-03-28T21:44:47.954928"}},"type":"object","required":["period_type","summaries"],"title":"HealthSummaryResponse"},"Measurement":{"properties":{"id":{"type":"integer","title":"Id"},"date":{"type":"string","format":"date-time","title":"Date"},"type":{"type":"integer","title":"Type"},"value":{"type":"number","title":"Value"},"measure_name":{"type":"string","title":"Measure Name"},"display_unit":{"type":"string","title":"Display Unit"}},"type":"object","required":["id","date","type","value","measure_name","display_unit"],"title":"Measurement"},"MetricValue":{"properties":{"avg":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg"},"min":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min"},"max":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max"},"unit":{"type":"string","title":"Unit"},"sample_count":{"type":"integer","title":"Sample Count"}},"type":"object","required":["avg","min","max","unit","sample_count"],"title":"MetricValue"},"PeriodSummary":{"properties":{"period_start":{"type":"string","format":"date-time","title":"Period Start"},"period_end":{"type":"string","format":"date-time","title":"Period End"},"metrics":{"additionalProperties":{"$ref":"#/components/schemas/MetricValue"},"type":"object","title":"Metrics"}},"type":"object","required":["period_start","period_end","metrics"],"title":"PeriodSummary"},"RowingExtractRequest":{"properties":{"image_url":{"type":"string","maxLength":2083,"minLength":1,"format":"uri","title":"Image Url"},"workout_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Workout Date"}},"type":"object","required":["image_url"],"title":"RowingExtractRequest","description":"Request model for the rowing workout image extraction endpoint.\n\nAttributes:\n    image_url: URL of the rowing machine workout screenshot to process\n    workout_date: Optional timestamp when the workout was performed. \n                 If not provided, the current date will be used."},"RowingResponse":{"properties":{"workouts":{"items":{"$ref":"#/components/schemas/RowingWorkout"},"type":"array","title":"Workouts"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","default":"2025-03-28T21:44:47.949528"},"timezone":{"type":"string","title":"Timezone","default":"UTC"}},"type":"object","required":["workouts"],"title":"RowingResponse","description":"Response model for the rowing workout retrieval endpoint.\nIncludes a list of workouts and metadata about the response.\n\nAttributes:\n    workouts: List of rowing workout records matching the query parameters\n    timestamp: UTC timestamp when the response was generated\n    timezone: Timezone identifier for the timestamps in the response (always \"UTC\")\n\nExample:\n    {\n        \"workouts\": [\n            {\n                \"id\": 1,\n                \"date\": \"2023-10-15T08:30:00\",\n                \"workout_type\": \"distance\",\n                \"duration_seconds\": 1800.5,\n                \"distance_meters\": 5000.0,\n                \"avg_split\": 120.0\n            }\n        ],\n        \"timestamp\": \"2023-10-16T14:22:10.123456\",\n        \"timezone\": \"UTC\"\n    }"},"RowingWorkout":{"properties":{"id":{"type":"integer","title":"Id"},"date":{"type":"string","format":"date-time","title":"Date"},"workout_type":{"type":"string","title":"Workout Type"},"duration_seconds":{"type":"number","title":"Duration Seconds"},"distance_meters":{"type":"number","title":"Distance Meters"},"avg_split":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Split"}},"type":"object","required":["id","date","workout_type","duration_seconds","distance_meters"],"title":"RowingWorkout","description":"Model representing a rowing workout stored in the database.\nIncludes all rowing metrics plus metadata like ID and timestamp.\n\nAttributes:\n    id: Unique identifier for the workout record\n    date: Timestamp when the workout was performed (UTC)\n    workout_type: Type of workout - \"distance\" or \"interval\"\n    duration_seconds: Total duration of the workout in seconds\n    distance_meters: Total distance rowed in meters\n    avg_split: Average split time in seconds per 500m (may be null for interval workouts)"},"StatMeasurement":{"properties":{"type":{"type":"integer","title":"Type"},"measure_name":{"type":"string","title":"Measure Name"},"avg_value":{"type":"number","title":"Avg Value"},"min_value":{"type":"number","title":"Min Value"},"max_value":{"type":"number","title":"Max Value"},"display_unit":{"type":"string","title":"Display Unit"},"reading_count":{"type":"integer","title":"Reading Count"},"classification":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Classification"}},"type":"object","required":["type","measure_name","avg_value","min_value","max_value","display_unit","reading_count"],"title":"StatMeasurement"},"StatsResponse":{"properties":{"stats":{"items":{"$ref":"#/components/schemas/StatMeasurement"},"type":"array","title":"Stats"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","default":"2025-03-28T21:44:47.952767"},"timezone":{"type":"string","title":"Timezone","default":"UTC"}},"type":"object","required":["stats"],"title":"StatsResponse"},"TestData":{"properties":{"content":{"type":"string","title":"Content"}},"type":"object","required":["content"],"title":"TestData"},"TrendMeasurement":{"properties":{"period":{"type":"string","format":"date-time","title":"Period"},"type":{"type":"integer","title":"Type"},"measure_name":{"type":"string","title":"Measure Name"},"avg_value":{"type":"number","title":"Avg Value"},"min_value":{"type":"number","title":"Min Value"},"max_value":{"type":"number","title":"Max Value"},"display_unit":{"type":"string","title":"Display Unit"},"reading_count":{"type":"integer","title":"Reading Count"}},"type":"object","required":["period","type","measure_name","avg_value","min_value","max_value","display_unit","reading_count"],"title":"TrendMeasurement"},"TrendResponse":{"properties":{"trends":{"items":{"$ref":"#/components/schemas/TrendMeasurement"},"type":"array","title":"Trends"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","default":"2025-03-28T21:44:47.952315"},"timezone":{"type":"string","title":"Timezone","default":"UTC"}},"type":"object","required":["trends"],"title":"TrendResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"APIKeyHeader":{"type":"apiKey","in":"header","name":"X-API-Key"}}}}